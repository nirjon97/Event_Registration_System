<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Event details</title>
</head>
<body>

  <h1 style="text-align: center; font-family: Arial, Helvetica, sans-serif;"><br>Event Registration System<br></h1>


 <div class="container">

  {% if messages %}
  <ul class="messages">
 {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}><b style="color: darkgreen;">{{ message }}</b></li>
 {% endfor %}
  </ul>
 {% endif %}
 
   <nav class="navbar navbar-expand-lg navbar-light bg-light">
     <div class="container-fluid">
       
       <div class="collapse navbar-collapse" id="navbarNav">
         <ul class="navbar-nav">
           {% if user.is_authenticated %}
             <li class="nav-item">
               <span class="navbar-link">Hello,<b> {{ user.username }}!</b></span>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="{% url 'custom_logout' %}"><button class="btn btn-danger"><b>Logout</b></button></a>
             </li>
           {% else %}
             <li class="nav-item">
               <a class="nav-link" href="{% url 'custom_login' %}"><button class="btn btn-primary"><b>Login</b></button></a>
             </li>
             <li class="nav-item">
               <a class="nav-link" href="{% url 'custom_register' %}"><button class="btn btn-primary"><b>Register</b></button></a>
             </li>
           {% endif %}
         </ul>
       </div>
     </div>
   </nav>
  
  <div class="container">
        <h2>{{ single_event.title }}</h2>
        <p>{{ single_event.description }}</p>
        <p><b>Date:</b> {{ single_event.date }} </p>
        <p><b>Time:</b> {{ single_event.time }}</p>
        <p><b> Location: </b>{{ single_event.location_name }}</p>
        <p><b>Slots Limit: </b><span class="badge bg-success">{{ single_event.slots_limit }}</span></p>
        <p><b>Remaining Slots: </b><span class="badge bg-success">{{ single_event.slots_available }}</span></p>
    
        {% if user_enrolled %}
        <form method="post" action="{% url 'unregister_event' event_id=single_event.id %}">
            {% csrf_token %}
            <button type="submit">Unregister from the Event</button>
        </form>
    {% elif single_event.slots_available > 0 %}
        <form method="post" action="{% url 'register' event_id=single_event.id %}">
            {% csrf_token %}
            <button type="submit">Register for the Event</button>
        </form>
    {% else %}
        <p>No available slots for this event.</p>
    {% endif %}
<br>
        <a href="{% url 'home_page' %}" class="btn btn-secondary">Back to Event List</a>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
</body>
</html>